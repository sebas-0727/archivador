<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Archivador Digital</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-gray-100 flex h-screen">
    <div class="flex-grow flex flex-col">
        <div class="flex justify-between items-center p-4 bg-white shadow">
            <span class="font-bold text-xl">Archivador Digital</span>
            <a href="/logout" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded text-sm">
                Cerrar Sesión
            </a>
        </div>

        <main class="flex-grow py-6 px-4 sm:px-6 lg:px-8">
            <div class="max-w-7xl mx-auto p-6">
                <h1 class="text-3xl font-bold mb-6">Panel de Control</h1>

                <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                    <!-- Sección de Búsqueda -->
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h2 class="text-xl font-semibold mb-4">Búsqueda de Registros</h2>
                        <p class="mb-4">Realiza búsquedas de registros existentes en el sistema.</p>
                        <a href="/busqueda" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700">
                            Ir a Búsqueda
                        </a>
                    </div>

                    <!-- Sección de Registro -->
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h2 class="text-xl font-semibold mb-4">Registro de Nuevos Datos</h2>
                        <p class="mb-4">Agrega nuevos registros al sistema para su posterior búsqueda.</p>
                        <a href="/registro" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700">
                            Ir a Registro
                        </a>
                    </div>

                    <!-- Sección de Historial -->
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h2 class="text-xl font-semibold mb-4">Historial de Búsquedas</h2>
                        <p class="mb-4">Consulta el historial de búsquedas realizadas en el sistema.</p>
                        <a href="/historial" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700">
                            Ir a Historial
                        </a>
                    </div>

                    <!-- Sección de Cambiar Ubicación -->
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h2 class="text-xl font-semibold mb-4">Cambiar Ubicación</h2>
                        <p class="mb-4">Modifica la ubicación de los Documentos AZ en el sistema.</p>
                        <a href="/cambiar_ubicacion" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700">
                            Ir a Cambiar Ubicación
                        </a>
                    </div>
                </div>

                <!-- Sección de Última Búsqueda -->
                <div class="bg-white p-6 rounded-lg shadow mt-6">
                    <h2 class="text-xl font-semibold mb-4">Última Búsqueda</h2>
                    {% if last_search %}
                        <!-- Versión para escritorio (se oculta en móviles) -->
                        <div class="hidden md:block overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tipo</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Número</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Módulo</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Año</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ubicación</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fecha</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm">{{ last_search[1] }}</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm">{{ last_search[2] }}</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm">{{ last_search[3] }}</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm">{{ last_search[4] }}</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm">{{ last_search[5] }}</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm">{{ last_search[6] }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Versión para móviles (aparece solo en pantallas pequeñas) -->
                        <div class="block md:hidden mt-4">
                            <div class="grid grid-cols-1 gap-4">
                                <div class="bg-gray-50 p-4 rounded shadow-sm">
                                    <div class="grid grid-cols-2 gap-2">
                                        <div class="text-xs font-medium text-gray-500">Tipo:</div>
                                        <div class="text-sm">{{ last_search[1] }}</div>
                                        
                                        <div class="text-xs font-medium text-gray-500">Número:</div>
                                        <div class="text-sm">{{ last_search[2] }}</div>
                                        
                                        <div class="text-xs font-medium text-gray-500">Módulo:</div>
                                        <div class="text-sm">{{ last_search[3] }}</div>
                                        
                                        <div class="text-xs font-medium text-gray-500">Año:</div>
                                        <div class="text-sm">{{ last_search[4] }}</div>
                                        
                                        <div class="text-xs font-medium text-gray-500">Ubicación:</div>
                                        <div class="text-sm">{{ last_search[5] }}</div>
                                        
                                        <div class="text-xs font-medium text-gray-500">Fecha:</div>
                                        <div class="text-sm">{{ last_search[6] }}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <p class="mb-4">No se ha realizado ninguna búsqueda aún.</p>
                    {% endif %}
                </div>
            </div>
        </main>
    </div>

    <!-- Inicializar iconos -->
    <script>
        lucide.createIcons();
    </script>
</body>
</html>